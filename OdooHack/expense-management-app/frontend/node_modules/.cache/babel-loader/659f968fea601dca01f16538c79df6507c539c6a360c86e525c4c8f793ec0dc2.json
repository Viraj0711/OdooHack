{"ast":null,"code":"var _jsxFileName = \"D:\\\\Odoo 2\\\\OdooHack\\\\expense-management-app\\\\frontend\\\\src\\\\components\\\\receipt\\\\AdvancedReceiptManager.js\",\n  _s4 = $RefreshSig$();\nimport React, { useState, useRef, useCallback } from 'react';\nimport Tesseract from 'tesseract.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdvancedReceiptManager = ({\n  onReceiptProcessed,\n  onReceiptValidated\n}) => {\n  _s4();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [ocrProgress, setOcrProgress] = useState(0);\n  const [ocrResult, setOcrResult] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [duplicateCheck, setDuplicateCheck] = useState(null);\n  const [receiptData, setReceiptData] = useState(null);\n  const fileInputRef = useRef(null);\n  const cameraRef = useRef(null);\n  const [isCameraMode, setIsCameraMode] = useState(false);\n\n  // OCR Processing Component\n  const OCRProcessor = ({\n    file,\n    onComplete\n  }) => {\n    _s();\n    const [progress, setProgress] = useState(0);\n    const [ocrText, setOcrText] = useState('');\n    const [extractedData, setExtractedData] = useState({});\n    const processOCR = useCallback(async imageFile => {\n      setIsProcessing(true);\n      setProgress(0);\n      try {\n        const result = await Tesseract.recognize(imageFile, 'eng', {\n          logger: m => {\n            if (m.status === 'recognizing text') {\n              setProgress(Math.round(m.progress * 100));\n            }\n          }\n        });\n        const text = result.data.text;\n        setOcrText(text);\n\n        // Extract structured data from OCR text\n        const extractedInfo = extractReceiptData(text);\n        setExtractedData(extractedInfo);\n        if (onComplete) {\n          onComplete({\n            text,\n            extractedData: extractedInfo\n          });\n        }\n        setIsProcessing(false);\n      } catch (error) {\n        console.error('OCR Error:', error);\n        setIsProcessing(false);\n      }\n    }, [onComplete]);\n    const extractReceiptData = text => {\n      const data = {};\n\n      // Extract amount (looking for patterns like ₹123.45, Rs. 123.45, etc.)\n      const amountRegex = /(?:₹|Rs\\.?\\s*|INR\\s*|Total[:\\s]*)?(\\d{1,3}(?:,\\d{3})*(?:\\.\\d{2})?)/gi;\n      const amounts = text.match(amountRegex);\n      if (amounts) {\n        const numericAmounts = amounts.map(amt => parseFloat(amt.replace(/[₹Rs\\.,\\s]/g, ''))).filter(amt => amt > 0);\n        data.amount = Math.max(...numericAmounts);\n      }\n\n      // Extract date (DD/MM/YYYY, DD-MM-YYYY, etc.)\n      const dateRegex = /(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{2,4})/g;\n      const dates = text.match(dateRegex);\n      if (dates) {\n        data.date = dates[0];\n      }\n\n      // Extract vendor/merchant name (usually at the top)\n      const lines = text.split('\\n').filter(line => line.trim());\n      if (lines.length > 0) {\n        data.vendorName = lines[0].trim();\n      }\n\n      // Extract GST/Tax numbers\n      const gstRegex = /GST[:\\s]*([A-Z0-9]{15})/gi;\n      const gstMatch = text.match(gstRegex);\n      if (gstMatch) {\n        data.gstNumber = gstMatch[0];\n      }\n\n      // Extract address (lines containing common address keywords)\n      const addressKeywords = ['road', 'street', 'avenue', 'city', 'state', 'pin', 'pincode'];\n      const addressLines = lines.filter(line => addressKeywords.some(keyword => line.toLowerCase().includes(keyword)));\n      if (addressLines.length > 0) {\n        data.vendorAddress = addressLines.join(', ');\n      }\n\n      // Extract line items\n      const itemRegex = /(.+?)\\s+(\\d+(?:\\.\\d{2})?)/g;\n      const items = [];\n      let match;\n      while ((match = itemRegex.exec(text)) !== null) {\n        if (match[1].length > 3 && match[1].length < 50) {\n          items.push({\n            description: match[1].trim(),\n            amount: parseFloat(match[2])\n          });\n        }\n      }\n      if (items.length > 0) {\n        data.lineItems = items;\n      }\n      return data;\n    };\n    React.useEffect(() => {\n      if (file) {\n        processOCR(file);\n      }\n    }, [file, processOCR]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-50 p-4 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium text-blue-900\",\n              children: \"Processing Receipt with OCR...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-blue-200 rounded-full h-2 mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                style: {\n                  width: `${progress}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-700 mt-1\",\n              children: [progress, \"% complete\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), extractedData && Object.keys(extractedData).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-50 p-4 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-sm font-medium text-green-900 mb-3\",\n          children: \"Extracted Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [extractedData.amount && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-green-700\",\n              children: \"Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: [\"\\u20B9\", extractedData.amount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 17\n          }, this), extractedData.date && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-green-700\",\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: extractedData.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this), extractedData.vendorName && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-green-700\",\n              children: \"Vendor:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: extractedData.vendorName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), extractedData.gstNumber && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-green-700\",\n              children: \"GST Number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: extractedData.gstNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onReceiptProcessed(extractedData),\n          className: \"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\",\n          children: \"Auto-Fill Expense Form\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Receipt Validation Component\n  _s(OCRProcessor, \"GHytR6qTkMUVg0NfCJbyZlTQO4Y=\");\n  const ReceiptValidator = ({\n    receiptFile,\n    receiptData\n  }) => {\n    _s2();\n    const [validationResults, setValidationResults] = useState([]);\n    const [isDuplicate, setIsDuplicate] = useState(false);\n    const [validationScore, setValidationScore] = useState(0);\n    React.useEffect(() => {\n      if (receiptFile && receiptData) {\n        validateReceipt();\n      }\n    }, [receiptFile, receiptData]);\n    const validateReceipt = async () => {\n      const validations = [];\n      let score = 0;\n\n      // Check if receipt has required information\n      if (receiptData.amount && receiptData.amount > 0) {\n        validations.push({\n          type: 'amount',\n          status: 'pass',\n          message: 'Amount extracted successfully'\n        });\n        score += 25;\n      } else {\n        validations.push({\n          type: 'amount',\n          status: 'fail',\n          message: 'Amount not found or invalid'\n        });\n      }\n      if (receiptData.date) {\n        validations.push({\n          type: 'date',\n          status: 'pass',\n          message: 'Date extracted successfully'\n        });\n        score += 25;\n      } else {\n        validations.push({\n          type: 'date',\n          status: 'fail',\n          message: 'Date not found'\n        });\n      }\n      if (receiptData.vendorName) {\n        validations.push({\n          type: 'vendor',\n          status: 'pass',\n          message: 'Vendor name extracted'\n        });\n        score += 25;\n      } else {\n        validations.push({\n          type: 'vendor',\n          status: 'warning',\n          message: 'Vendor name not clearly visible'\n        });\n        score += 10;\n      }\n\n      // Check image quality\n      const imageQuality = await checkImageQuality(receiptFile);\n      if (imageQuality.score > 0.7) {\n        validations.push({\n          type: 'quality',\n          status: 'pass',\n          message: 'Good image quality'\n        });\n        score += 25;\n      } else {\n        validations.push({\n          type: 'quality',\n          status: 'warning',\n          message: 'Image quality could be better'\n        });\n        score += 10;\n      }\n\n      // Check for duplicates\n      const duplicateCheck = await checkForDuplicates(receiptData);\n      if (duplicateCheck.isDuplicate) {\n        validations.push({\n          type: 'duplicate',\n          status: 'fail',\n          message: `Potential duplicate of expense #${duplicateCheck.expenseId}`\n        });\n        setIsDuplicate(true);\n      } else {\n        validations.push({\n          type: 'duplicate',\n          status: 'pass',\n          message: 'No duplicates found'\n        });\n        score += 0; // No points for this, just validation\n      }\n      setValidationResults(validations);\n      setValidationScore(score);\n      if (onReceiptValidated) {\n        onReceiptValidated({\n          validations,\n          score,\n          isDuplicate\n        });\n      }\n    };\n    const checkImageQuality = async file => {\n      // Simulate image quality check\n      return new Promise(resolve => {\n        setTimeout(() => {\n          resolve({\n            score: Math.random() * 0.4 + 0.6\n          }); // Random score between 0.6-1.0\n        }, 500);\n      });\n    };\n    const checkForDuplicates = async data => {\n      // Simulate duplicate check against existing receipts\n      return new Promise(resolve => {\n        setTimeout(() => {\n          const isDuplicate = Math.random() < 0.1; // 10% chance of duplicate\n          resolve({\n            isDuplicate,\n            expenseId: isDuplicate ? 'EXP-' + Math.floor(Math.random() * 1000) : null\n          });\n        }, 1000);\n      });\n    };\n    const getValidationColor = status => {\n      switch (status) {\n        case 'pass':\n          return 'text-green-600';\n        case 'warning':\n          return 'text-yellow-600';\n        case 'fail':\n          return 'text-red-600';\n        default:\n          return 'text-gray-600';\n      }\n    };\n    const getValidationIcon = status => {\n      switch (status) {\n        case 'pass':\n          return /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-green-500\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M5 13l4 4L19 7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this);\n        case 'warning':\n          return /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-yellow-500\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L3.316 16.5c-.77.833.192 2.5 1.732 2.5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this);\n        case 'fail':\n          return /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-red-500\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M6 18L18 6M6 6l12 12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this);\n        default:\n          return null;\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: \"Receipt Validation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Score:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm font-semibold ${validationScore >= 75 ? 'text-green-600' : validationScore >= 50 ? 'text-yellow-600' : 'text-red-600'}`,\n            children: [validationScore, \"/100\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: validationResults.map((result, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [getValidationIcon(result.status), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-sm ${getValidationColor(result.status)}`,\n              children: result.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), isDuplicate && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-3 bg-red-50 border border-red-200 rounded-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-red-400\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L3.316 16.5c-.77.833.192 2.5 1.732 2.5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Duplicate Receipt Detected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-red-700 mt-1\",\n              children: \"This receipt appears similar to a previously submitted expense. Please verify before proceeding.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Mobile Camera Capture Component\n  _s2(ReceiptValidator, \"BLXspn5Gl1n/J7kH1DA8nwefck4=\");\n  const MobileCameraCapture = ({\n    onCapture\n  }) => {\n    _s3();\n    const [stream, setStream] = useState(null);\n    const videoRef = useRef(null);\n    const canvasRef = useRef(null);\n    const startCamera = async () => {\n      try {\n        const mediaStream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            facingMode: 'environment',\n            // Use back camera\n            width: {\n              ideal: 1920\n            },\n            height: {\n              ideal: 1080\n            }\n          }\n        });\n        setStream(mediaStream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = mediaStream;\n        }\n      } catch (error) {\n        console.error('Camera access error:', error);\n        alert('Unable to access camera. Please use file upload instead.');\n      }\n    };\n    const captureImage = () => {\n      if (videoRef.current && canvasRef.current) {\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        context.drawImage(video, 0, 0);\n        canvas.toBlob(blob => {\n          const file = new File([blob], 'receipt-capture.jpg', {\n            type: 'image/jpeg'\n          });\n          onCapture(file);\n          stopCamera();\n        }, 'image/jpeg', 0.9);\n      }\n    };\n    const stopCamera = () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n        setStream(null);\n      }\n      setIsCameraMode(false);\n    };\n    React.useEffect(() => {\n      if (isCameraMode) {\n        startCamera();\n      }\n      return () => {\n        if (stream) {\n          stream.getTracks().forEach(track => track.stop());\n        }\n      };\n    }, [isCameraMode]);\n    if (!isCameraMode) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsCameraMode(true),\n        className: \"w-full px-4 py-3 border-2 border-dashed border-blue-300 rounded-lg text-blue-600 hover:border-blue-400 hover:bg-blue-50 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-6 h-6 mx-auto mb-2\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this), \"\\uD83D\\uDCF1 Capture with Camera\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        className: \"w-full rounded-lg\",\n        style: {\n          maxHeight: '300px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: captureImage,\n          className: \"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n          children: \"\\uD83D\\uDCF7 Capture Receipt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopCamera,\n          className: \"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this);\n  };\n  _s3(MobileCameraCapture, \"PvFjyiLC8qQC9XE3D3FUGktpwPQ=\");\n  const handleFileSelect = file => {\n    setSelectedFile(file);\n    setReceiptData(null);\n  };\n  const handleReceiptProcessed = data => {\n    setReceiptData(data);\n    if (onReceiptProcessed) {\n      onReceiptProcessed(data);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Advanced Receipt Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this), !selectedFile && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-2 border-dashed border-gray-300 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => e.target.files[0] && handleFileSelect(e.target.files[0]),\n            className: \"hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"mx-auto h-12 w-12 text-gray-400\",\n              stroke: \"currentColor\",\n              fill: \"none\",\n              viewBox: \"0 0 48 48\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\",\n                strokeWidth: 2,\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                className: \"text-blue-600 hover:text-blue-800 font-medium\",\n                children: \"Upload Receipt Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mt-1 text-sm text-gray-500\",\n                children: \"PNG, JPG, GIF up to 10MB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-gray-500\",\n          children: \"or\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MobileCameraCapture, {\n          onCapture: handleFileSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 11\n      }, this), selectedFile && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-gray-900\",\n            children: [\"Processing: \", selectedFile.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setSelectedFile(null);\n              setReceiptData(null);\n              setOcrResult(null);\n            },\n            className: \"text-red-600 hover:text-red-800\",\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(selectedFile),\n          alt: \"Receipt\",\n          className: \"max-w-full h-auto rounded-lg shadow-md\",\n          style: {\n            maxHeight: '300px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this), selectedFile && /*#__PURE__*/_jsxDEV(OCRProcessor, {\n      file: selectedFile,\n      onComplete: handleReceiptProcessed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }, this), selectedFile && receiptData && /*#__PURE__*/_jsxDEV(ReceiptValidator, {\n      receiptFile: selectedFile,\n      receiptData: receiptData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 476,\n    columnNumber: 5\n  }, this);\n};\n_s4(AdvancedReceiptManager, \"OBs8Guh5pDC35g/CWwHVzUNn688=\");\n_c = AdvancedReceiptManager;\nexport default AdvancedReceiptManager;\nvar _c;\n$RefreshReg$(_c, \"AdvancedReceiptManager\");","map":{"version":3,"names":["React","useState","useRef","useCallback","Tesseract","jsxDEV","_jsxDEV","AdvancedReceiptManager","onReceiptProcessed","onReceiptValidated","_s4","_s","$RefreshSig$","_s2","_s3","selectedFile","setSelectedFile","ocrProgress","setOcrProgress","ocrResult","setOcrResult","isProcessing","setIsProcessing","duplicateCheck","setDuplicateCheck","receiptData","setReceiptData","fileInputRef","cameraRef","isCameraMode","setIsCameraMode","OCRProcessor","file","onComplete","progress","setProgress","ocrText","setOcrText","extractedData","setExtractedData","processOCR","imageFile","result","recognize","logger","m","status","Math","round","text","data","extractedInfo","extractReceiptData","error","console","amountRegex","amounts","match","numericAmounts","map","amt","parseFloat","replace","filter","amount","max","dateRegex","dates","date","lines","split","line","trim","length","vendorName","gstRegex","gstMatch","gstNumber","addressKeywords","addressLines","some","keyword","toLowerCase","includes","vendorAddress","join","itemRegex","items","exec","push","description","lineItems","useEffect","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","Object","keys","onClick","ReceiptValidator","receiptFile","validationResults","setValidationResults","isDuplicate","setIsDuplicate","validationScore","setValidationScore","validateReceipt","validations","score","type","message","imageQuality","checkImageQuality","checkForDuplicates","expenseId","Promise","resolve","setTimeout","random","floor","getValidationColor","getValidationIcon","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","index","MobileCameraCapture","onCapture","stream","setStream","videoRef","canvasRef","startCamera","mediaStream","navigator","mediaDevices","getUserMedia","video","facingMode","ideal","height","current","srcObject","alert","captureImage","canvas","context","getContext","videoWidth","videoHeight","drawImage","toBlob","blob","File","stopCamera","getTracks","forEach","track","stop","ref","autoPlay","playsInline","maxHeight","display","handleFileSelect","handleReceiptProcessed","accept","onChange","e","target","files","_fileInputRef$current","click","name","src","URL","createObjectURL","alt","_c","$RefreshReg$"],"sources":["D:/Odoo 2/OdooHack/expense-management-app/frontend/src/components/receipt/AdvancedReceiptManager.js"],"sourcesContent":["import React, { useState, useRef, useCallback } from 'react';\r\nimport Tesseract from 'tesseract.js';\r\n\r\nconst AdvancedReceiptManager = ({ onReceiptProcessed, onReceiptValidated }) => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [ocrProgress, setOcrProgress] = useState(0);\r\n  const [ocrResult, setOcrResult] = useState(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [duplicateCheck, setDuplicateCheck] = useState(null);\r\n  const [receiptData, setReceiptData] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n  const cameraRef = useRef(null);\r\n  const [isCameraMode, setIsCameraMode] = useState(false);\r\n\r\n  // OCR Processing Component\r\n  const OCRProcessor = ({ file, onComplete }) => {\r\n    const [progress, setProgress] = useState(0);\r\n    const [ocrText, setOcrText] = useState('');\r\n    const [extractedData, setExtractedData] = useState({});\r\n\r\n    const processOCR = useCallback(async (imageFile) => {\r\n      setIsProcessing(true);\r\n      setProgress(0);\r\n\r\n      try {\r\n        const result = await Tesseract.recognize(imageFile, 'eng', {\r\n          logger: m => {\r\n            if (m.status === 'recognizing text') {\r\n              setProgress(Math.round(m.progress * 100));\r\n            }\r\n          }\r\n        });\r\n\r\n        const text = result.data.text;\r\n        setOcrText(text);\r\n\r\n        // Extract structured data from OCR text\r\n        const extractedInfo = extractReceiptData(text);\r\n        setExtractedData(extractedInfo);\r\n\r\n        if (onComplete) {\r\n          onComplete({ text, extractedData: extractedInfo });\r\n        }\r\n\r\n        setIsProcessing(false);\r\n      } catch (error) {\r\n        console.error('OCR Error:', error);\r\n        setIsProcessing(false);\r\n      }\r\n    }, [onComplete]);\r\n\r\n    const extractReceiptData = (text) => {\r\n      const data = {};\r\n      \r\n      // Extract amount (looking for patterns like ₹123.45, Rs. 123.45, etc.)\r\n      const amountRegex = /(?:₹|Rs\\.?\\s*|INR\\s*|Total[:\\s]*)?(\\d{1,3}(?:,\\d{3})*(?:\\.\\d{2})?)/gi;\r\n      const amounts = text.match(amountRegex);\r\n      if (amounts) {\r\n        const numericAmounts = amounts.map(amt => \r\n          parseFloat(amt.replace(/[₹Rs\\.,\\s]/g, ''))\r\n        ).filter(amt => amt > 0);\r\n        data.amount = Math.max(...numericAmounts);\r\n      }\r\n\r\n      // Extract date (DD/MM/YYYY, DD-MM-YYYY, etc.)\r\n      const dateRegex = /(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{2,4})/g;\r\n      const dates = text.match(dateRegex);\r\n      if (dates) {\r\n        data.date = dates[0];\r\n      }\r\n\r\n      // Extract vendor/merchant name (usually at the top)\r\n      const lines = text.split('\\n').filter(line => line.trim());\r\n      if (lines.length > 0) {\r\n        data.vendorName = lines[0].trim();\r\n      }\r\n\r\n      // Extract GST/Tax numbers\r\n      const gstRegex = /GST[:\\s]*([A-Z0-9]{15})/gi;\r\n      const gstMatch = text.match(gstRegex);\r\n      if (gstMatch) {\r\n        data.gstNumber = gstMatch[0];\r\n      }\r\n\r\n      // Extract address (lines containing common address keywords)\r\n      const addressKeywords = ['road', 'street', 'avenue', 'city', 'state', 'pin', 'pincode'];\r\n      const addressLines = lines.filter(line => \r\n        addressKeywords.some(keyword => \r\n          line.toLowerCase().includes(keyword)\r\n        )\r\n      );\r\n      if (addressLines.length > 0) {\r\n        data.vendorAddress = addressLines.join(', ');\r\n      }\r\n\r\n      // Extract line items\r\n      const itemRegex = /(.+?)\\s+(\\d+(?:\\.\\d{2})?)/g;\r\n      const items = [];\r\n      let match;\r\n      while ((match = itemRegex.exec(text)) !== null) {\r\n        if (match[1].length > 3 && match[1].length < 50) {\r\n          items.push({\r\n            description: match[1].trim(),\r\n            amount: parseFloat(match[2])\r\n          });\r\n        }\r\n      }\r\n      if (items.length > 0) {\r\n        data.lineItems = items;\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    React.useEffect(() => {\r\n      if (file) {\r\n        processOCR(file);\r\n      }\r\n    }, [file, processOCR]);\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {isProcessing && (\r\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium text-blue-900\">Processing Receipt with OCR...</p>\r\n                <div className=\"w-full bg-blue-200 rounded-full h-2 mt-2\">\r\n                  <div \r\n                    className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                    style={{ width: `${progress}%` }}\r\n                  ></div>\r\n                </div>\r\n                <p className=\"text-xs text-blue-700 mt-1\">{progress}% complete</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {extractedData && Object.keys(extractedData).length > 0 && (\r\n          <div className=\"bg-green-50 p-4 rounded-lg\">\r\n            <h4 className=\"text-sm font-medium text-green-900 mb-3\">Extracted Information</h4>\r\n            <div className=\"space-y-2\">\r\n              {extractedData.amount && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-green-700\">Amount:</span>\r\n                  <span className=\"text-sm font-medium\">₹{extractedData.amount}</span>\r\n                </div>\r\n              )}\r\n              {extractedData.date && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-green-700\">Date:</span>\r\n                  <span className=\"text-sm font-medium\">{extractedData.date}</span>\r\n                </div>\r\n              )}\r\n              {extractedData.vendorName && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-green-700\">Vendor:</span>\r\n                  <span className=\"text-sm font-medium\">{extractedData.vendorName}</span>\r\n                </div>\r\n              )}\r\n              {extractedData.gstNumber && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-green-700\">GST Number:</span>\r\n                  <span className=\"text-sm font-medium\">{extractedData.gstNumber}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <button\r\n              onClick={() => onReceiptProcessed(extractedData)}\r\n              className=\"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\r\n            >\r\n              Auto-Fill Expense Form\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Receipt Validation Component\r\n  const ReceiptValidator = ({ receiptFile, receiptData }) => {\r\n    const [validationResults, setValidationResults] = useState([]);\r\n    const [isDuplicate, setIsDuplicate] = useState(false);\r\n    const [validationScore, setValidationScore] = useState(0);\r\n\r\n    React.useEffect(() => {\r\n      if (receiptFile && receiptData) {\r\n        validateReceipt();\r\n      }\r\n    }, [receiptFile, receiptData]);\r\n\r\n    const validateReceipt = async () => {\r\n      const validations = [];\r\n      let score = 0;\r\n\r\n      // Check if receipt has required information\r\n      if (receiptData.amount && receiptData.amount > 0) {\r\n        validations.push({ type: 'amount', status: 'pass', message: 'Amount extracted successfully' });\r\n        score += 25;\r\n      } else {\r\n        validations.push({ type: 'amount', status: 'fail', message: 'Amount not found or invalid' });\r\n      }\r\n\r\n      if (receiptData.date) {\r\n        validations.push({ type: 'date', status: 'pass', message: 'Date extracted successfully' });\r\n        score += 25;\r\n      } else {\r\n        validations.push({ type: 'date', status: 'fail', message: 'Date not found' });\r\n      }\r\n\r\n      if (receiptData.vendorName) {\r\n        validations.push({ type: 'vendor', status: 'pass', message: 'Vendor name extracted' });\r\n        score += 25;\r\n      } else {\r\n        validations.push({ type: 'vendor', status: 'warning', message: 'Vendor name not clearly visible' });\r\n        score += 10;\r\n      }\r\n\r\n      // Check image quality\r\n      const imageQuality = await checkImageQuality(receiptFile);\r\n      if (imageQuality.score > 0.7) {\r\n        validations.push({ type: 'quality', status: 'pass', message: 'Good image quality' });\r\n        score += 25;\r\n      } else {\r\n        validations.push({ type: 'quality', status: 'warning', message: 'Image quality could be better' });\r\n        score += 10;\r\n      }\r\n\r\n      // Check for duplicates\r\n      const duplicateCheck = await checkForDuplicates(receiptData);\r\n      if (duplicateCheck.isDuplicate) {\r\n        validations.push({ \r\n          type: 'duplicate', \r\n          status: 'fail', \r\n          message: `Potential duplicate of expense #${duplicateCheck.expenseId}` \r\n        });\r\n        setIsDuplicate(true);\r\n      } else {\r\n        validations.push({ type: 'duplicate', status: 'pass', message: 'No duplicates found' });\r\n        score += 0; // No points for this, just validation\r\n      }\r\n\r\n      setValidationResults(validations);\r\n      setValidationScore(score);\r\n\r\n      if (onReceiptValidated) {\r\n        onReceiptValidated({ validations, score, isDuplicate });\r\n      }\r\n    };\r\n\r\n    const checkImageQuality = async (file) => {\r\n      // Simulate image quality check\r\n      return new Promise(resolve => {\r\n        setTimeout(() => {\r\n          resolve({ score: Math.random() * 0.4 + 0.6 }); // Random score between 0.6-1.0\r\n        }, 500);\r\n      });\r\n    };\r\n\r\n    const checkForDuplicates = async (data) => {\r\n      // Simulate duplicate check against existing receipts\r\n      return new Promise(resolve => {\r\n        setTimeout(() => {\r\n          const isDuplicate = Math.random() < 0.1; // 10% chance of duplicate\r\n          resolve({ \r\n            isDuplicate, \r\n            expenseId: isDuplicate ? 'EXP-' + Math.floor(Math.random() * 1000) : null \r\n          });\r\n        }, 1000);\r\n      });\r\n    };\r\n\r\n    const getValidationColor = (status) => {\r\n      switch (status) {\r\n        case 'pass': return 'text-green-600';\r\n        case 'warning': return 'text-yellow-600';\r\n        case 'fail': return 'text-red-600';\r\n        default: return 'text-gray-600';\r\n      }\r\n    };\r\n\r\n    const getValidationIcon = (status) => {\r\n      switch (status) {\r\n        case 'pass':\r\n          return (\r\n            <svg className=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n            </svg>\r\n          );\r\n        case 'warning':\r\n          return (\r\n            <svg className=\"w-5 h-5 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L3.316 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n            </svg>\r\n          );\r\n        case 'fail':\r\n          return (\r\n            <svg className=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          );\r\n        default:\r\n          return null;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Receipt Validation</h3>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className=\"text-sm text-gray-600\">Score:</span>\r\n            <span className={`text-sm font-semibold ${\r\n              validationScore >= 75 ? 'text-green-600' : \r\n              validationScore >= 50 ? 'text-yellow-600' : 'text-red-600'\r\n            }`}>\r\n              {validationScore}/100\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {validationResults.map((result, index) => (\r\n            <div key={index} className=\"flex items-center space-x-3\">\r\n              {getValidationIcon(result.status)}\r\n              <div className=\"flex-1\">\r\n                <p className={`text-sm ${getValidationColor(result.status)}`}>\r\n                  {result.message}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {isDuplicate && (\r\n          <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-md\">\r\n            <div className=\"flex\">\r\n              <svg className=\"w-5 h-5 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L3.316 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n              <div className=\"ml-3\">\r\n                <h4 className=\"text-sm font-medium text-red-800\">Duplicate Receipt Detected</h4>\r\n                <p className=\"text-xs text-red-700 mt-1\">\r\n                  This receipt appears similar to a previously submitted expense. Please verify before proceeding.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Mobile Camera Capture Component\r\n  const MobileCameraCapture = ({ onCapture }) => {\r\n    const [stream, setStream] = useState(null);\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n\r\n    const startCamera = async () => {\r\n      try {\r\n        const mediaStream = await navigator.mediaDevices.getUserMedia({ \r\n          video: { \r\n            facingMode: 'environment', // Use back camera\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1080 }\r\n          } \r\n        });\r\n        setStream(mediaStream);\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = mediaStream;\r\n        }\r\n      } catch (error) {\r\n        console.error('Camera access error:', error);\r\n        alert('Unable to access camera. Please use file upload instead.');\r\n      }\r\n    };\r\n\r\n    const captureImage = () => {\r\n      if (videoRef.current && canvasRef.current) {\r\n        const video = videoRef.current;\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext('2d');\r\n\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n        context.drawImage(video, 0, 0);\r\n\r\n        canvas.toBlob((blob) => {\r\n          const file = new File([blob], 'receipt-capture.jpg', { type: 'image/jpeg' });\r\n          onCapture(file);\r\n          stopCamera();\r\n        }, 'image/jpeg', 0.9);\r\n      }\r\n    };\r\n\r\n    const stopCamera = () => {\r\n      if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n        setStream(null);\r\n      }\r\n      setIsCameraMode(false);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n      if (isCameraMode) {\r\n        startCamera();\r\n      }\r\n      return () => {\r\n        if (stream) {\r\n          stream.getTracks().forEach(track => track.stop());\r\n        }\r\n      };\r\n    }, [isCameraMode]);\r\n\r\n    if (!isCameraMode) {\r\n      return (\r\n        <button\r\n          onClick={() => setIsCameraMode(true)}\r\n          className=\"w-full px-4 py-3 border-2 border-dashed border-blue-300 rounded-lg text-blue-600 hover:border-blue-400 hover:bg-blue-50 transition-colors\"\r\n        >\r\n          <svg className=\"w-6 h-6 mx-auto mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n          </svg>\r\n          📱 Capture with Camera\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <video\r\n          ref={videoRef}\r\n          autoPlay\r\n          playsInline\r\n          className=\"w-full rounded-lg\"\r\n          style={{ maxHeight: '300px' }}\r\n        />\r\n        <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        \r\n        <div className=\"flex space-x-3\">\r\n          <button\r\n            onClick={captureImage}\r\n            className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n          >\r\n            📷 Capture Receipt\r\n          </button>\r\n          <button\r\n            onClick={stopCamera}\r\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleFileSelect = (file) => {\r\n    setSelectedFile(file);\r\n    setReceiptData(null);\r\n  };\r\n\r\n  const handleReceiptProcessed = (data) => {\r\n    setReceiptData(data);\r\n    if (onReceiptProcessed) {\r\n      onReceiptProcessed(data);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Advanced Receipt Management</h3>\r\n        \r\n        {!selectedFile && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6\">\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={(e) => e.target.files[0] && handleFileSelect(e.target.files[0])}\r\n                className=\"hidden\"\r\n              />\r\n              \r\n              <div className=\"text-center\">\r\n                <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\r\n                  <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n                <div className=\"mt-4\">\r\n                  <button\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n                  >\r\n                    Upload Receipt Image\r\n                  </button>\r\n                  <p className=\"mt-1 text-sm text-gray-500\">PNG, JPG, GIF up to 10MB</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center text-gray-500\">or</div>\r\n\r\n            <MobileCameraCapture onCapture={handleFileSelect} />\r\n          </div>\r\n        )}\r\n\r\n        {selectedFile && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"font-medium text-gray-900\">Processing: {selectedFile.name}</h4>\r\n              <button\r\n                onClick={() => {\r\n                  setSelectedFile(null);\r\n                  setReceiptData(null);\r\n                  setOcrResult(null);\r\n                }}\r\n                className=\"text-red-600 hover:text-red-800\"\r\n              >\r\n                Remove\r\n              </button>\r\n            </div>\r\n            \r\n            <img\r\n              src={URL.createObjectURL(selectedFile)}\r\n              alt=\"Receipt\"\r\n              className=\"max-w-full h-auto rounded-lg shadow-md\"\r\n              style={{ maxHeight: '300px' }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {selectedFile && (\r\n        <OCRProcessor file={selectedFile} onComplete={handleReceiptProcessed} />\r\n      )}\r\n\r\n      {selectedFile && receiptData && (\r\n        <ReceiptValidator receiptFile={selectedFile} receiptData={receiptData} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancedReceiptManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}