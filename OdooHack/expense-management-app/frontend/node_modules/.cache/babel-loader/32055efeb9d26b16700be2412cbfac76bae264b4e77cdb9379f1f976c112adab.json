{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n    this.setupAxiosInterceptors();\n  }\n  setupAxiosInterceptors() {\n    // Request interceptor to add auth token\n    axios.interceptors.request.use(config => {\n      if (this.token) {\n        config.headers.Authorization = `Bearer ${this.token}`;\n      }\n      return config;\n    }, error => Promise.reject(error));\n\n    // Response interceptor to handle auth errors\n    axios.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        this.removeToken();\n        window.location.href = '/login';\n      }\n      return Promise.reject(error);\n    });\n  }\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('token', token);\n  }\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('token');\n  }\n  async register(userData) {\n    const response = await axios.post(`${API_BASE_URL}/auth/register`, userData);\n    return response.data;\n  }\n  async login(credentials) {\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\n    return response.data;\n  }\n  async logout() {\n    await axios.post(`${API_BASE_URL}/auth/logout`);\n  }\n  async getCurrentUser() {\n    const response = await axios.get(`${API_BASE_URL}/auth/me`);\n    return response.data;\n  }\n  async updateProfile(profileData) {\n    const response = await axios.put(`${API_BASE_URL}/auth/profile`, profileData);\n    return response.data.data;\n  }\n  async changePassword(passwordData) {\n    const response = await axios.put(`${API_BASE_URL}/auth/change-password`, passwordData);\n    return response.data;\n  }\n}\nexport const authService = new AuthService();","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","AuthService","constructor","token","localStorage","getItem","setupAxiosInterceptors","interceptors","request","use","config","headers","Authorization","error","Promise","reject","response","_error$response","status","removeToken","window","location","href","setToken","setItem","removeItem","register","userData","post","data","login","credentials","logout","getCurrentUser","get","updateProfile","profileData","put","changePassword","passwordData","authService"],"sources":["D:/Odoo 2/OdooHack/expense-management-app/frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = localStorage.getItem('token');\r\n    this.setupAxiosInterceptors();\r\n  }\r\n\r\n  setupAxiosInterceptors() {\r\n    // Request interceptor to add auth token\r\n    axios.interceptors.request.use(\r\n      (config) => {\r\n        if (this.token) {\r\n          config.headers.Authorization = `Bearer ${this.token}`;\r\n        }\r\n        return config;\r\n      },\r\n      (error) => Promise.reject(error)\r\n    );\r\n\r\n    // Response interceptor to handle auth errors\r\n    axios.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        if (error.response?.status === 401) {\r\n          this.removeToken();\r\n          window.location.href = '/login';\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n    localStorage.setItem('token', token);\r\n  }\r\n\r\n  removeToken() {\r\n    this.token = null;\r\n    localStorage.removeItem('token');\r\n  }\r\n\r\n  async register(userData) {\r\n    const response = await axios.post(`${API_BASE_URL}/auth/register`, userData);\r\n    return response.data;\r\n  }\r\n\r\n  async login(credentials) {\r\n    const response = await axios.post(`${API_BASE_URL}/auth/login`, credentials);\r\n    return response.data;\r\n  }\r\n\r\n  async logout() {\r\n    await axios.post(`${API_BASE_URL}/auth/logout`);\r\n  }\r\n\r\n  async getCurrentUser() {\r\n    const response = await axios.get(`${API_BASE_URL}/auth/me`);\r\n    return response.data;\r\n  }\r\n\r\n  async updateProfile(profileData) {\r\n    const response = await axios.put(`${API_BASE_URL}/auth/profile`, profileData);\r\n    return response.data.data;\r\n  }\r\n\r\n  async changePassword(passwordData) {\r\n    const response = await axios.put(`${API_BASE_URL}/auth/change-password`, passwordData);\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport const authService = new AuthService();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAEjF,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC1C,IAAI,CAACC,sBAAsB,CAAC,CAAC;EAC/B;EAEAA,sBAAsBA,CAAA,EAAG;IACvB;IACAV,KAAK,CAACW,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAK;MACV,IAAI,IAAI,CAACP,KAAK,EAAE;QACdO,MAAM,CAACC,OAAO,CAACC,aAAa,GAAG,UAAU,IAAI,CAACT,KAAK,EAAE;MACvD;MACA,OAAOO,MAAM;IACf,CAAC,EACAG,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;;IAED;IACAjB,KAAK,CAACW,YAAY,CAACS,QAAQ,CAACP,GAAG,CAC5BO,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;MAAA,IAAAI,eAAA;MACT,IAAI,EAAAA,eAAA,GAAAJ,KAAK,CAACG,QAAQ,cAAAC,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;QAClC,IAAI,CAACC,WAAW,CAAC,CAAC;QAClBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACjC;MACA,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CACF,CAAC;EACH;EAEAU,QAAQA,CAACpB,KAAK,EAAE;IACd,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClBC,YAAY,CAACoB,OAAO,CAAC,OAAO,EAAErB,KAAK,CAAC;EACtC;EAEAgB,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAChB,KAAK,GAAG,IAAI;IACjBC,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC;EAClC;EAEA,MAAMC,QAAQA,CAACC,QAAQ,EAAE;IACvB,MAAMX,QAAQ,GAAG,MAAMpB,KAAK,CAACgC,IAAI,CAAC,GAAG/B,YAAY,gBAAgB,EAAE8B,QAAQ,CAAC;IAC5E,OAAOX,QAAQ,CAACa,IAAI;EACtB;EAEA,MAAMC,KAAKA,CAACC,WAAW,EAAE;IACvB,MAAMf,QAAQ,GAAG,MAAMpB,KAAK,CAACgC,IAAI,CAAC,GAAG/B,YAAY,aAAa,EAAEkC,WAAW,CAAC;IAC5E,OAAOf,QAAQ,CAACa,IAAI;EACtB;EAEA,MAAMG,MAAMA,CAAA,EAAG;IACb,MAAMpC,KAAK,CAACgC,IAAI,CAAC,GAAG/B,YAAY,cAAc,CAAC;EACjD;EAEA,MAAMoC,cAAcA,CAAA,EAAG;IACrB,MAAMjB,QAAQ,GAAG,MAAMpB,KAAK,CAACsC,GAAG,CAAC,GAAGrC,YAAY,UAAU,CAAC;IAC3D,OAAOmB,QAAQ,CAACa,IAAI;EACtB;EAEA,MAAMM,aAAaA,CAACC,WAAW,EAAE;IAC/B,MAAMpB,QAAQ,GAAG,MAAMpB,KAAK,CAACyC,GAAG,CAAC,GAAGxC,YAAY,eAAe,EAAEuC,WAAW,CAAC;IAC7E,OAAOpB,QAAQ,CAACa,IAAI,CAACA,IAAI;EAC3B;EAEA,MAAMS,cAAcA,CAACC,YAAY,EAAE;IACjC,MAAMvB,QAAQ,GAAG,MAAMpB,KAAK,CAACyC,GAAG,CAAC,GAAGxC,YAAY,uBAAuB,EAAE0C,YAAY,CAAC;IACtF,OAAOvB,QAAQ,CAACa,IAAI;EACtB;AACF;AAEA,OAAO,MAAMW,WAAW,GAAG,IAAIvC,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}